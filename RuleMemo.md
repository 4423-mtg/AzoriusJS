# データとして扱うもの
- カード/トークン
  - 特性群
    - 各種特性
  - 位相
- ターンおよびターンの進行
- 領域とそこにあるカードの順序
  - 手札とかは順序を使わないけど設定しておく
- ルール文章
  - ルール文章内のインスタンス(色の単語、基本土地タイプ、クリーチャー・タイプ)
- (カードの)能力
- 呪文、(スタック上の)能力
- 継続的効果
  - タイムスタンプ
- 置換効果
- 軽減効果
- ★ゲームの履歴

- 基本ルール全般
  - ダメージの決定（ドラン）
  - 状況起因処理（力の具現、ジローサ）
  - 世界のるつぼ

# 実装すべきもの
データの操作は除く　実装が必要と思われる順
## ゲーム
- ターンの進行
  - 戦闘
    - 攻撃クリーチャーの指定
    - ブロッククリーチャーの指定
    - ダメージの結果として起こるイベント
- 種類別
  - 特性定義能力（レイヤー内での優先的処理）
  - タイムスタンプ
  - 依存
- 状況起因処理
- 呪文を唱える/起動型能力を起動する/特別な処理
- マナ能力かどうかの判定

## 効果
- ☆置換効果や誘発型能力によるイベントのチェック機構
- 置換効果の適用（→オブジェクトとしての置換効果）
  - 戦場に出ることに対する置換効果の適用有無および適用順番
  - カードを引くことに対する置換効果
- ☆軽減効果による発生源の選択
- ☆同時に行う処理
- ☆単一の能力内で複数レイヤーの継続的効果
  - グラーツ
- 文章変更効果
- 期限付き効果（放逐する僧侶）
- プレイヤーをコントロールする効果
- 禁止効果
- 自己置換効果

## other
- カードの表示

# ルール上の考慮点
## 代替の特性
- 両面かつ出来事/反転/試作持ちなどもあり得る。分割、反転、両面、出来事、試作、（変異、授与）
  - 特性間の関係
    - 分割：融合がもう一方の面を参照
    - 反転：一部特性を共有
    - 両面：マナ総量等一部は第1面参照
    - 出来事/試作：属する通常面を指定

- ヴォルラスの多相の戦士

# Q
- スタック上にトークンが乗ることはあるか？
- 状況誘発の誘発チェック check_state_triggers()
- フック
- ターン起因処理の間に状況起因処理はある？
- 誘発した能力をスタックに積んだことによって発生する状況起因処理って何？？

- アンタップ・ステップには優先権は発生しない

- クリンナップに優先権が発生する正確な条件
  - -1/-1カウンターが1個置かれた基本1/1のクリーチャーが、ターン終了時まで+1/+1の修正を受けている。\
    この状態でターンを終了した場合、誘発する能力がなくてもそのクリンナップで優先権を得る？ \
    -> **Yes**

